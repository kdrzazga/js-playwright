<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iframe Animation with Preloading</title>
    <style>
        iframe {
            width: 100%;
            height: 760px;
			
            border: none;
            transition: opacity 1s ease;
            opacity: 0;
			horizontal-align: center;
        }
		
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            width: 100vw;
            background-color: #ffffff;
        }
    </style>
</head>
<body>
    <iframe id="contentFrame" src=""></iframe>

    <script>
	class PageAnimator {
		constructor(pages, frameId, interval = 110) {
			this.pages = pages;
			this.currentPageIndex = 0;
			this.isAnimationRunning = false;
			this.intervalId = null;
			this.frame = document.getElementById(frameId);
			this.interval = interval;
	
			this.preloadPages();
		}
	
		preloadPages() {
			this.preloadedPages = this.pages.map(page => {
				const link = document.createElement('link');
				link.rel = 'prefetch';
				link.href = page;
				document.head.appendChild(link);
				return page;
			});
		}
	
		changePage(page) {
			this.frame.style.opacity = 1;  
			setTimeout(() => {
				this.frame.src = page;
				this.frame.onload = () => {
					this.frame.style.opacity = 1; 
				};
			}, 5);  
		}
	
		startAnimation() {
			if (!this.isAnimationRunning) {
				this.intervalId = setInterval(() => {
					this.isAnimationRunning = true;
					this.changePage(this.preloadedPages[this.currentPageIndex]);
					this.currentPageIndex = (this.currentPageIndex + 1) % this.preloadedPages.length;
				}, this.interval);
			} else {
				console.log("Animation already running.");
			}
		}
	
		stopAnimation() {
			if (this.isAnimationRunning) {
				clearInterval(this.intervalId);
				this.isAnimationRunning = false;
				console.log("Animation stopped.");
			}
		}
	}

	const pagesList = ['k1.html', 'k2.html', 'k1.html', 'k2.html', 'k3.html', 'k4.html', 'k3.html', 'k2.html', 'k1.html', 'k2.html', 'k1.html', 'k2.html', 'k1.html', 'k2.html', 'k1.html', 'k2.html', 'k1.html', 'k2.html', 'k1.html', 'k2.html', 'k1.html', 'k2.html'];
	const pageAnimator = new PageAnimator(pagesList, 'contentFrame');
	pageAnimator.startAnimation();
    </script>
</body>
</html>
